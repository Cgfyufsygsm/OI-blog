<!DOCTYPE html>
<html dir="ltr" lang="zh-CN">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="笑死了还是没补完。
NOIP2011 D1T2 选择客栈 直接维护一个点能匹配到的客栈个数即可。
要开 long long。
D1T3 Mayan 游戏 题面。
首先下落函数可以这样写：
bool fall() { bool ret = 0; FOR(x, 0, 4) { int top = 0; FOR(y, 0, 6) if (a[x][y]) ret |= (top != y), a[x][top++] = a[x][y]; while (top &amp;lt;= 6) a[x][top++] = 0; } return ret; } 然后是检查的函数
bool del() { bool ret = 0; bool vis[5][7]; FOR(x, 0, 4) FOR(y, 0, 6) vis[x][y] = 0; FOR(x, 0, 4) FOR(y, 2, 6) if (a[x][y] &amp;amp;&amp;amp; a[x][y - 2] == a[x][y - 1] &amp;amp;&amp;amp; a[x][y - 1] == a[x][y]) vis[x][y - 2] = vis[x][y - 1] = vis[x][y] = ret = 1; FOR(y, 0, 6) FOR(x, 2, 4) if (a[x][y] &amp;amp;&amp;amp; a[x - 2][y] == a[x - 1][y] &amp;amp;&amp;amp; a[x - 1][y] == a[x][y]) vis[x - 2][y] = vis[x - 1][y] = vis[x][y] = ret = 1; FOR(x, 0, 4) FOR(y, 0, 6) if (vis[x][y]) a[x][y] = 0; return ret; } 这里容易写锅。" name="description"/><title>历年联赛真题选做</title>
<link href="https://oi.imyangty.com/sol-past-noip/" rel="canonical"/>
<link href="/scss/style.min.a5821f3d3ab84ce5a0ac21477e347a2e0ca00292e398d16c5e8e36ded6e35a23.css" rel="stylesheet"/><meta content="历年联赛真题选做" property="og:title"/>
<meta content="笑死了还是没补完。
NOIP2011 D1T2 选择客栈 直接维护一个点能匹配到的客栈个数即可。
要开 long long。
D1T3 Mayan 游戏 题面。
首先下落函数可以这样写：
bool fall() { bool ret = 0; FOR(x, 0, 4) { int top = 0; FOR(y, 0, 6) if (a[x][y]) ret |= (top != y), a[x][top++] = a[x][y]; while (top &amp;lt;= 6) a[x][top++] = 0; } return ret; } 然后是检查的函数
bool del() { bool ret = 0; bool vis[5][7]; FOR(x, 0, 4) FOR(y, 0, 6) vis[x][y] = 0; FOR(x, 0, 4) FOR(y, 2, 6) if (a[x][y] &amp;amp;&amp;amp; a[x][y - 2] == a[x][y - 1] &amp;amp;&amp;amp; a[x][y - 1] == a[x][y]) vis[x][y - 2] = vis[x][y - 1] = vis[x][y] = ret = 1; FOR(y, 0, 6) FOR(x, 2, 4) if (a[x][y] &amp;amp;&amp;amp; a[x - 2][y] == a[x - 1][y] &amp;amp;&amp;amp; a[x - 1][y] == a[x][y]) vis[x - 2][y] = vis[x - 1][y] = vis[x][y] = ret = 1; FOR(x, 0, 4) FOR(y, 0, 6) if (vis[x][y]) a[x][y] = 0; return ret; } 这里容易写锅。" property="og:description"/>
<meta content="https://oi.imyangty.com/sol-past-noip/" property="og:url"/>
<meta content="清烛的博客" property="og:site_name"/>
<meta content="article" property="og:type"/><meta content="Post" property="article:section"/><meta content="OI" property="article:tag"/><meta content="noip" property="article:tag"/><meta content="题解" property="article:tag"/><meta content="模拟" property="article:tag"/><meta content="前缀和" property="article:tag"/><meta content="搜索" property="article:tag"/><meta content="二分答案" property="article:tag"/><meta content="贪心" property="article:tag"/><meta content="高精度" property="article:tag"/><meta content="动态规划" property="article:tag"/><meta content="2021-09-25T22:31:22+08:00" property="article:published_time"/><meta content="2021-09-25T22:31:22+08:00" property="article:modified_time"/><meta content="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg35.webp" property="og:image"/>
<meta content="历年联赛真题选做" name="twitter:title"/>
<meta content="笑死了还是没补完。
NOIP2011 D1T2 选择客栈 直接维护一个点能匹配到的客栈个数即可。
要开 long long。
D1T3 Mayan 游戏 题面。
首先下落函数可以这样写：
bool fall() { bool ret = 0; FOR(x, 0, 4) { int top = 0; FOR(y, 0, 6) if (a[x][y]) ret |= (top != y), a[x][top++] = a[x][y]; while (top &amp;lt;= 6) a[x][top++] = 0; } return ret; } 然后是检查的函数
bool del() { bool ret = 0; bool vis[5][7]; FOR(x, 0, 4) FOR(y, 0, 6) vis[x][y] = 0; FOR(x, 0, 4) FOR(y, 2, 6) if (a[x][y] &amp;amp;&amp;amp; a[x][y - 2] == a[x][y - 1] &amp;amp;&amp;amp; a[x][y - 1] == a[x][y]) vis[x][y - 2] = vis[x][y - 1] = vis[x][y] = ret = 1; FOR(y, 0, 6) FOR(x, 2, 4) if (a[x][y] &amp;amp;&amp;amp; a[x - 2][y] == a[x - 1][y] &amp;amp;&amp;amp; a[x - 1][y] == a[x][y]) vis[x - 2][y] = vis[x - 1][y] = vis[x][y] = ret = 1; FOR(x, 0, 4) FOR(y, 0, 6) if (vis[x][y]) a[x][y] = 0; return ret; } 这里容易写锅。" name="twitter:description"/><meta content="summary_large_image" name="twitter:card"/>
<meta content="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg35.webp" name="twitter:image"/>
<link href="https://q1.qlogo.cn/g?b=qq&amp;nk=375836877&amp;s=5" rel="shortcut icon"/>
<link href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/styles/github-dark-dimmed.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body class="article-page">
<script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button aria-label="切换菜单" class="hamburger hamburger--spin" id="toggle-menu" type="button">
<span class="hamburger-box">
<span class="hamburger-inner"></span>
</span>
</button>
<header>
<figure class="site-avatar">
<a href="/">
<img alt="Avatar" class="site-logo" height="300" loading="lazy" src="/img/avatar_huea3ce2119467b51fdd2a81393644a76d_51594_300x0_resize_q75_box.jpg" width="300"/>
</a>
<span class="emoji">😅</span>
</figure>
<div class="site-meta">
<h1 class="site-name"><a href="/">清烛的博客</a></h1>
<h2 class="site-description">烟火已谢，笙歌未停</h2>
</div>
</header><ol class="social-menu">
<li>
<a href="mailto:i@imyangty.com" target="_blank" title="email">
<svg class="icon icon-tabler icon-tabler-mail" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<rect height="14" rx="2" width="18" x="3" y="5"></rect>
<polyline points="3 7 12 13 21 7"></polyline>
</svg>
</a>
</li>
<li>
<a href="https://github.com/Cgfyufsygsm" target="_blank" title="GitHub">
<svg class="icon icon-tabler icon-tabler-brand-github" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
</svg>
</a>
</li>
<li>
<a href="https://t.me/Cgfyufsygsm" target="_blank" title="Telegram">
<svg class="icon icon-tabler icon-tabler-brand-telegram" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4"></path>
</svg>
</a>
</li>
<li>
<a href="https://twitter.com/Cgfyufsygsm" target="_blank" title="Twitter">
<svg class="icon icon-tabler icon-tabler-brand-twitter" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"></path>
</svg>
</a>
</li>
</ol><ol class="menu" id="main-menu">
<li>
<a href="/">
<svg class="icon icon-tabler icon-tabler-home" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<polyline points="5 12 3 12 12 3 21 12 19 12"></polyline>
<path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
<path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
</svg>
<span>主页</span>
</a>
</li>
<li>
<a href="/about/">
<svg class="icon icon-tabler icon-tabler-user" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="12" cy="7" r="4"></circle>
<path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
</svg>
<span>关于</span>
</a>
</li>
<li>
<a href="/idx/">
<svg class="icon icon-tabler icon-tabler-hash" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<line x1="5" x2="19" y1="9" y2="9"></line>
<line x1="5" x2="19" y1="15" y2="15"></line>
<line x1="11" x2="7" y1="4" y2="20"></line>
<line x1="17" x2="13" y1="4" y2="20"></line>
</svg>
<span>导航</span>
</a>
</li>
<li>
<a href="/archives/">
<svg class="icon icon-tabler icon-tabler-archive" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<rect height="4" rx="2" width="18" x="3" y="4"></rect>
<path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"></path>
<line x1="10" x2="14" y1="12" y2="12"></line>
</svg>
<span>归档</span>
</a>
</li>
<li>
<a href="/search/">
<svg class="icon icon-tabler icon-tabler-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="10" cy="10" r="7"></circle>
<line x1="21" x2="15" y1="21" y2="15"></line>
</svg>
<span>搜索</span>
</a>
</li>
<li>
<a href="/friends/">
<svg class="icon icon-tabler icon-tabler-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path>
<path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path>
</svg>
<span>友链</span>
</a>
</li>
<li>
<a href="https://blog.imyangty.com" target="_blank">
<svg class="icon icon-tabler icon-tabler-home" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<polyline points="5 12 3 12 12 3 21 12 19 12"></polyline>
<path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
<path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
</svg>
<span>主博客</span>
</a>
</li>
<div class="menu-bottom-section">
<li id="dark-mode-toggle">
<svg class="icon icon-tabler icon-tabler-toggle-left" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="8" cy="12" r="2"></circle>
<rect height="12" rx="6" width="20" x="2" y="6"></rect>
</svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="16" cy="12" r="2"></circle>
<rect height="12" rx="6" width="20" x="2" y="6"></rect>
</svg>
<span>暗色模式</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class="has-image main-article">
<header class="article-header">
<div class="article-image">
<a href="/sol-past-noip/">
<img alt="Featured image of post 历年联赛真题选做" loading="lazy" src="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg35.webp"/>
</a>
</div>
<div class="article-details">
<header class="article-category">
<a href="/categories/oi/">
                OI
            </a>
<a href="/categories/tutorial/">
                题解
            </a>
</header>
<div class="article-title-wrapper">
<h2 class="article-title">
<a href="/sol-past-noip/">历年联赛真题选做</a>
</h2>
</div>
<footer class="article-time">
<div>
<svg class="icon icon-tabler icon-tabler-calendar-time" fill="none" height="56" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="56" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4"></path>
<circle cx="18" cy="18" r="4"></circle>
<path d="M15 3v4"></path>
<path d="M7 3v4"></path>
<path d="M3 11h16"></path>
<path d="M18 16.496v1.504l1 1"></path>
</svg>
<time class="article-time--published">Sep 25, 2021</time>
</div>
<div>
<svg class="icon icon-tabler icon-tabler-clock" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="12" cy="12" r="9"></circle>
<polyline points="12 7 12 12 15 15"></polyline>
</svg>
<time class="article-time--reading">
                    阅读时长: 7 分钟
                </time>
</div>
</footer>
</div>
</header>
<section class="article-content">
<p>笑死了还是没补完。</p>
<h2 id="noip2011">NOIP2011</h2>
<h3 id="d1t2-选择客栈">D1T2 选择客栈</h3>
<p>直接维护一个点能匹配到的客栈个数即可。</p>
<p>要开 <code>long long</code>。</p>
<h3 id="d1t3-mayan-游戏">D1T3 Mayan 游戏</h3>
<p><a href="https://www.luogu.com.cn/problem/P1312">题面</a>。</p>
<p>首先下落函数可以这样写：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1"></a><span class="dt">bool</span> fall() {</span>
<span id="cb1-2"><a aria-hidden="true" href="#cb1-2"></a>    <span class="dt">bool</span> ret = <span class="dv">0</span>;</span>
<span id="cb1-3"><a aria-hidden="true" href="#cb1-3"></a>    FOR(x, <span class="dv">0</span>, <span class="dv">4</span>) {</span>
<span id="cb1-4"><a aria-hidden="true" href="#cb1-4"></a>        <span class="dt">int</span> top = <span class="dv">0</span>;</span>
<span id="cb1-5"><a aria-hidden="true" href="#cb1-5"></a>        FOR(y, <span class="dv">0</span>, <span class="dv">6</span>) <span class="cf">if</span> (a[x][y]) ret |= (top != y), a[x][top++] = a[x][y];</span>
<span id="cb1-6"><a aria-hidden="true" href="#cb1-6"></a>        <span class="cf">while</span> (top &lt;= <span class="dv">6</span>) a[x][top++] = <span class="dv">0</span>;</span>
<span id="cb1-7"><a aria-hidden="true" href="#cb1-7"></a>    }</span>
<span id="cb1-8"><a aria-hidden="true" href="#cb1-8"></a>    <span class="cf">return</span> ret;</span>
<span id="cb1-9"><a aria-hidden="true" href="#cb1-9"></a>}</span></code></pre></div>
<p>然后是检查的函数</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1"></a><span class="dt">bool</span> del() {</span>
<span id="cb2-2"><a aria-hidden="true" href="#cb2-2"></a>    <span class="dt">bool</span> ret = <span class="dv">0</span>;</span>
<span id="cb2-3"><a aria-hidden="true" href="#cb2-3"></a>    <span class="dt">bool</span> vis[<span class="dv">5</span>][<span class="dv">7</span>];</span>
<span id="cb2-4"><a aria-hidden="true" href="#cb2-4"></a>    FOR(x, <span class="dv">0</span>, <span class="dv">4</span>) FOR(y, <span class="dv">0</span>, <span class="dv">6</span>) vis[x][y] = <span class="dv">0</span>;</span>
<span id="cb2-5"><a aria-hidden="true" href="#cb2-5"></a>    FOR(x, <span class="dv">0</span>, <span class="dv">4</span>) FOR(y, <span class="dv">2</span>, <span class="dv">6</span>) <span class="cf">if</span> (a[x][y] &amp;&amp; a[x][y - <span class="dv">2</span>] == a[x][y - <span class="dv">1</span>] &amp;&amp; a[x][y - <span class="dv">1</span>] == a[x][y]) vis[x][y - <span class="dv">2</span>] = vis[x][y - <span class="dv">1</span>] = vis[x][y] = ret = <span class="dv">1</span>;</span>
<span id="cb2-6"><a aria-hidden="true" href="#cb2-6"></a>    FOR(y, <span class="dv">0</span>, <span class="dv">6</span>) FOR(x, <span class="dv">2</span>, <span class="dv">4</span>) <span class="cf">if</span> (a[x][y] &amp;&amp; a[x - <span class="dv">2</span>][y] == a[x - <span class="dv">1</span>][y] &amp;&amp; a[x - <span class="dv">1</span>][y] == a[x][y]) vis[x - <span class="dv">2</span>][y] = vis[x - <span class="dv">1</span>][y] = vis[x][y] = ret = <span class="dv">1</span>;</span>
<span id="cb2-7"><a aria-hidden="true" href="#cb2-7"></a>    FOR(x, <span class="dv">0</span>, <span class="dv">4</span>) FOR(y, <span class="dv">0</span>, <span class="dv">6</span>) <span class="cf">if</span> (vis[x][y]) a[x][y] = <span class="dv">0</span>;</span>
<span id="cb2-8"><a aria-hidden="true" href="#cb2-8"></a>    <span class="cf">return</span> ret;</span>
<span id="cb2-9"><a aria-hidden="true" href="#cb2-9"></a>}</span></code></pre></div>
<p>这里容易写锅。</p>
<p>然后修复的时候一定先掉落后删除。</p>
<p>剪枝：左移的话只有左边没有方块才移动，否则一定有往右边的移动是等价的并且先被遍历到。</p>
<p>然后 dfs 的时候按照他的字典序枚举即可。</p>
<h3 id="d2t1-计算系数">D2T1 计算系数</h3>
<p>二项式定理裸题。</p>
<h3 id="d2t2-聪明的质监员">D2T2 聪明的质监员</h3>
<p>傻逼二分答案。</p>
<h3 id="d2t3-观光公交">D2T3 观光公交</h3>
<p>令 <span class="math inline">\(S_i\)</span> 为在 <span class="math inline">\(i\)</span> 号点出发的最大时间，则不难发现，公交车在 <span class="math inline">\(i\)</span> 号点到达的时间 <span class="math inline">\(t(i) = D_{i - 1} + \max\{t(i - 1), S_{i - 1}\}\)</span>。</p>
<p>然后 <span class="math inline">\(ans = \sum_i\{t(B_i) - T_i\}\)</span>。</p>
<p>现在考虑每个氮气加速器的作用。其作用于 <span class="math inline">\(D_{i - 1}\)</span> 后能惠及的乘客需要尽可能多。所以只考虑这个找后面第一个人等车之前的人数即可。</p>
<p>所以考虑维护一个氮气加速器能影响到的右端点 <span class="math inline">\(f_i\)</span>，有 <span class="math display">\[
\begin{cases}
f_n = n\\
f_{n - 1} = n\\
f_i = \begin{cases}
f_{i + 1} &amp;t(i + 1) &gt; S_{i + 1}\\
i + 1 &amp;\text{otherwise}
\end{cases}
\end{cases}
\]</span> <span class="math inline">\(t(i+1) &gt; S_{i + 1}\)</span> 即为人等车的情况，只有这些情况是能被优化掉的，因为后面的就与他无关了。</p>
<p>每次维护一下 <span class="math inline">\(f\)</span> 和 <span class="math inline">\(t\)</span>，并找到能影响最多乘客的 <span class="math inline">\(i\)</span> 即可，复杂度 <span class="math inline">\(O(nk)\)</span>。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1"></a><span class="at">const</span> <span class="dt">int</span> maxn = <span class="fl">1e3</span> + <span class="dv">5</span>, maxm = <span class="fl">1e4</span> + <span class="dv">5</span>;</span>
<span id="cb3-2"><a aria-hidden="true" href="#cb3-2"></a><span class="kw">typedef</span> <span class="dt">long</span> <span class="dt">long</span> ll;</span>
<span id="cb3-3"><a aria-hidden="true" href="#cb3-3"></a><span class="dt">int</span> n, m, k;</span>
<span id="cb3-4"><a aria-hidden="true" href="#cb3-4"></a>ll maxt[maxn], D[maxn], T[maxm], A[maxm], B[maxm], t[maxn], arrive[maxn], f[maxn];</span>
<span id="cb3-5"><a aria-hidden="true" href="#cb3-5"></a></span>
<span id="cb3-6"><a aria-hidden="true" href="#cb3-6"></a><span class="kw">template</span>&lt;<span class="kw">typename</span> T&gt; il T max(<span class="at">const</span> T &amp;a, <span class="at">const</span> T &amp;b) {<span class="cf">return</span> a &gt; b ? a : b;}</span>
<span id="cb3-7"><a aria-hidden="true" href="#cb3-7"></a></span>
<span id="cb3-8"><a aria-hidden="true" href="#cb3-8"></a><span class="dt">int</span> main() {</span>
<span id="cb3-9"><a aria-hidden="true" href="#cb3-9"></a>    read(n), read(m), read(k);</span>
<span id="cb3-10"><a aria-hidden="true" href="#cb3-10"></a>    FOR(i, <span class="dv">1</span>, n - <span class="dv">1</span>) read(D[i]);</span>
<span id="cb3-11"><a aria-hidden="true" href="#cb3-11"></a>    FOR(i, <span class="dv">1</span>, m)</span>
<span id="cb3-12"><a aria-hidden="true" href="#cb3-12"></a>        read(T[i]), read(A[i]), read(B[i]), maxt[A[i]] = max(maxt[A[i]], T[i]), ++arrive[B[i]];</span>
<span id="cb3-13"><a aria-hidden="true" href="#cb3-13"></a>    FOR(i, <span class="dv">2</span>, n) t[i] = max(maxt[i - <span class="dv">1</span>], t[i - <span class="dv">1</span>]) + D[i - <span class="dv">1</span>], arrive[i] += arrive[i - <span class="dv">1</span>];</span>
<span id="cb3-14"><a aria-hidden="true" href="#cb3-14"></a>    ll ans = <span class="dv">0</span>;</span>
<span id="cb3-15"><a aria-hidden="true" href="#cb3-15"></a>    FOR(i, <span class="dv">1</span>, m) ans += t[B[i]] - T[i];</span>
<span id="cb3-16"><a aria-hidden="true" href="#cb3-16"></a>    <span class="cf">while</span> (k--) {</span>
<span id="cb3-17"><a aria-hidden="true" href="#cb3-17"></a>        f[n - <span class="dv">1</span>] = f[n] = n;</span>
<span id="cb3-18"><a aria-hidden="true" href="#cb3-18"></a>        DEC(i, n - <span class="dv">2</span>, <span class="dv">1</span>) {</span>
<span id="cb3-19"><a aria-hidden="true" href="#cb3-19"></a>            <span class="cf">if</span> (t[i + <span class="dv">1</span>] &gt; maxt[i + <span class="dv">1</span>])</span>
<span id="cb3-20"><a aria-hidden="true" href="#cb3-20"></a>                f[i] = f[i + <span class="dv">1</span>];</span>
<span id="cb3-21"><a aria-hidden="true" href="#cb3-21"></a>            <span class="cf">else</span> f[i] = i + <span class="dv">1</span>;</span>
<span id="cb3-22"><a aria-hidden="true" href="#cb3-22"></a>        }</span>
<span id="cb3-23"><a aria-hidden="true" href="#cb3-23"></a>        ll maxx = <span class="dv">0</span>, pos = <span class="dv">0</span>;</span>
<span id="cb3-24"><a aria-hidden="true" href="#cb3-24"></a>        FOR(i, <span class="dv">1</span>, n - <span class="dv">1</span>)</span>
<span id="cb3-25"><a aria-hidden="true" href="#cb3-25"></a>            <span class="cf">if</span> (maxx &lt; arrive[f[i]] - arrive[i] &amp;&amp; D[i]) maxx = arrive[f[i]] - arrive[i], pos = i;</span>
<span id="cb3-26"><a aria-hidden="true" href="#cb3-26"></a>        <span class="cf">if</span> (!pos) <span class="cf">break</span>;</span>
<span id="cb3-27"><a aria-hidden="true" href="#cb3-27"></a>        ans -= maxx, --D[pos];</span>
<span id="cb3-28"><a aria-hidden="true" href="#cb3-28"></a>        FOR(i, pos, n) t[i] = max(maxt[i - <span class="dv">1</span>], t[i - <span class="dv">1</span>]) + D[i - <span class="dv">1</span>];</span>
<span id="cb3-29"><a aria-hidden="true" href="#cb3-29"></a>    }</span>
<span id="cb3-30"><a aria-hidden="true" href="#cb3-30"></a>    print(ans);</span>
<span id="cb3-31"><a aria-hidden="true" href="#cb3-31"></a>    <span class="cf">return</span> output(), <span class="dv">0</span>;</span>
<span id="cb3-32"><a aria-hidden="true" href="#cb3-32"></a>}</span></code></pre></div>
<p>加强版咕咕咕。</p>
<h2 id="noip2012">NOIP2012</h2>
<h3 id="d1t1-vigenère-密码">D1T1 Vigenère 密码</h3>
<p>模拟 + 字符串。</p>
<h3 id="d1t2-国王游戏">D1T2 国王游戏</h3>
<p><del>没妈高精题</del>。据说是很著名的贪心。</p>
<p>不妨考虑调整法。考虑有两个人 <span class="math inline">\((a_1, b_1)\)</span> 和 <span class="math inline">\((a_2, b_2)\)</span>。令之前的数的乘积为 <span class="math inline">\(A\)</span>，若第一个人在前面比第二个人在前面优，则 <span class="math display">\[
\begin{aligned}
\max\left(\frac{A}{b_1}, \frac{Aa_1}{b_2}\right)&amp;&lt; \max\left(\frac{A}{b_2},\frac{Aa_2}{b_1}\right)\\
(\text{obviously there is }&amp; \frac{A}{b_1} &lt; \frac{Aa_2}{b_1})\\
Aa_1b_1 &amp;&lt; Aa_2b_2\\
a_1b_1 &amp;&lt; a_2b_2
\end{aligned}
\]</span> 按照 <span class="math inline">\(a_ib_i\)</span> 排序然后依次算就行了，但是需要高精度。</p>
<h3 id="d1t3-开车旅行">D1T3 开车旅行</h3>
<p>不难发现这个东西满足倍增需要的性质。设 <span class="math inline">\(f(i, k, 0/1, 0/1)\)</span> 为从第 <span class="math inline">\(i\)</span> 个城市 A/B 先开车（取决于第三维），开 <span class="math inline">\(2^k\)</span> 天后 A/B 走的路程（取决于第四维）。</p>
<p>比较烦反正就是。注意一开始需要熟练使用 STL 找最近的和次近的点。</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a aria-hidden="true" href="#cb4-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std;</span>
<span id="cb4-2"><a aria-hidden="true" href="#cb4-2"></a><span class="kw">typedef</span> pair&lt;<span class="dt">int</span>, <span class="dt">int</span>&gt; pii;</span>
<span id="cb4-3"><a aria-hidden="true" href="#cb4-3"></a><span class="at">const</span> <span class="dt">int</span> maxn = <span class="fl">1e5</span> + <span class="dv">5</span>;</span>
<span id="cb4-4"><a aria-hidden="true" href="#cb4-4"></a><span class="dt">int</span> n;</span>
<span id="cb4-5"><a aria-hidden="true" href="#cb4-5"></a><span class="dt">int</span> h[maxn], f[maxn][<span class="dv">20</span>][<span class="dv">2</span>][<span class="dv">2</span>], g[maxn][<span class="dv">20</span>][<span class="dv">2</span>];</span>
<span id="cb4-6"><a aria-hidden="true" href="#cb4-6"></a>set&lt;pii&gt; S;</span>
<span id="cb4-7"><a aria-hidden="true" href="#cb4-7"></a></span>
<span id="cb4-8"><a aria-hidden="true" href="#cb4-8"></a>il <span class="dt">int</span> myabs(<span class="dt">int</span> a) {<span class="cf">return</span> a &gt;= <span class="dv">0</span> ? a : -a;}</span>
<span id="cb4-9"><a aria-hidden="true" href="#cb4-9"></a></span>
<span id="cb4-10"><a aria-hidden="true" href="#cb4-10"></a><span class="dt">int</span> la, lb;</span>
<span id="cb4-11"><a aria-hidden="true" href="#cb4-11"></a></span>
<span id="cb4-12"><a aria-hidden="true" href="#cb4-12"></a><span class="dt">void</span> calc(<span class="dt">int</span> s, <span class="dt">int</span> x) {</span>
<span id="cb4-13"><a aria-hidden="true" href="#cb4-13"></a>    <span class="dt">int</span> p = s;</span>
<span id="cb4-14"><a aria-hidden="true" href="#cb4-14"></a>    la = lb = <span class="dv">0</span>;</span>
<span id="cb4-15"><a aria-hidden="true" href="#cb4-15"></a>    DEC(j, <span class="dv">19</span>, <span class="dv">0</span>) {</span>
<span id="cb4-16"><a aria-hidden="true" href="#cb4-16"></a>        <span class="cf">if</span> (~g[p][j][<span class="dv">0</span>] &amp;&amp; la + lb + f[p][j][<span class="dv">0</span>][<span class="dv">0</span>] + f[p][j][<span class="dv">0</span>][<span class="dv">1</span>] &lt;= x) {</span>
<span id="cb4-17"><a aria-hidden="true" href="#cb4-17"></a>            la += f[p][j][<span class="dv">0</span>][<span class="dv">0</span>];</span>
<span id="cb4-18"><a aria-hidden="true" href="#cb4-18"></a>            lb += f[p][j][<span class="dv">0</span>][<span class="dv">1</span>];</span>
<span id="cb4-19"><a aria-hidden="true" href="#cb4-19"></a>            p = g[p][j][<span class="dv">0</span>];</span>
<span id="cb4-20"><a aria-hidden="true" href="#cb4-20"></a>        }</span>
<span id="cb4-21"><a aria-hidden="true" href="#cb4-21"></a>    }</span>
<span id="cb4-22"><a aria-hidden="true" href="#cb4-22"></a>    <span class="cf">return</span>;</span>
<span id="cb4-23"><a aria-hidden="true" href="#cb4-23"></a>}</span>
<span id="cb4-24"><a aria-hidden="true" href="#cb4-24"></a></span>
<span id="cb4-25"><a aria-hidden="true" href="#cb4-25"></a><span class="dt">int</span> main() {</span>
<span id="cb4-26"><a aria-hidden="true" href="#cb4-26"></a>    read(n);</span>
<span id="cb4-27"><a aria-hidden="true" href="#cb4-27"></a>    FOR(i, <span class="dv">1</span>, n) read(h[i]);</span>
<span id="cb4-28"><a aria-hidden="true" href="#cb4-28"></a>    memset(f, <span class="bn">0x3f</span>, <span class="kw">sizeof</span> f);</span>
<span id="cb4-29"><a aria-hidden="true" href="#cb4-29"></a>    memset(g, -<span class="dv">1</span>, <span class="kw">sizeof</span> g);</span>
<span id="cb4-30"><a aria-hidden="true" href="#cb4-30"></a>    S.insert(make_pair(h[n], n));</span>
<span id="cb4-31"><a aria-hidden="true" href="#cb4-31"></a>    DEC(i, n - <span class="dv">1</span>, <span class="dv">1</span>) {</span>
<span id="cb4-32"><a aria-hidden="true" href="#cb4-32"></a>        <span class="kw">auto</span> it0 = S.lower_bound(make_pair(h[i], i)), it = it0;</span>
<span id="cb4-33"><a aria-hidden="true" href="#cb4-33"></a>        <span class="cf">if</span> (it != S.begin()) {</span>
<span id="cb4-34"><a aria-hidden="true" href="#cb4-34"></a>            --it;</span>
<span id="cb4-35"><a aria-hidden="true" href="#cb4-35"></a>            <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">1</span>; j &lt;= <span class="dv">2</span>; ++j, --it) {</span>
<span id="cb4-36"><a aria-hidden="true" href="#cb4-36"></a>                <span class="cf">if</span> (g[i][<span class="dv">0</span>][<span class="dv">1</span>] == -<span class="dv">1</span> || myabs(h[i] - it-&gt;first) &lt; myabs(h[i] - h[g[i][<span class="dv">0</span>][<span class="dv">1</span>]]))</span>
<span id="cb4-37"><a aria-hidden="true" href="#cb4-37"></a>                    g[i][<span class="dv">0</span>][<span class="dv">0</span>] = g[i][<span class="dv">0</span>][<span class="dv">1</span>], g[i][<span class="dv">0</span>][<span class="dv">1</span>] = it-&gt;second;</span>
<span id="cb4-38"><a aria-hidden="true" href="#cb4-38"></a>                <span class="cf">else</span> <span class="cf">if</span> (g[i][<span class="dv">0</span>][<span class="dv">0</span>] == -<span class="dv">1</span> || myabs(h[i] - it-&gt;first) &lt; myabs(h[i] - h[g[i][<span class="dv">0</span>][<span class="dv">0</span>]]))</span>
<span id="cb4-39"><a aria-hidden="true" href="#cb4-39"></a>                    g[i][<span class="dv">0</span>][<span class="dv">0</span>] = it-&gt;second;</span>
<span id="cb4-40"><a aria-hidden="true" href="#cb4-40"></a>                <span class="cf">if</span> (it == S.begin()) <span class="cf">break</span>;</span>
<span id="cb4-41"><a aria-hidden="true" href="#cb4-41"></a>            }</span>
<span id="cb4-42"><a aria-hidden="true" href="#cb4-42"></a>        }</span>
<span id="cb4-43"><a aria-hidden="true" href="#cb4-43"></a>        it = it0;</span>
<span id="cb4-44"><a aria-hidden="true" href="#cb4-44"></a>        <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">1</span>; j &lt;= <span class="dv">2</span> &amp;&amp; it != S.end(); ++j, ++it) {</span>
<span id="cb4-45"><a aria-hidden="true" href="#cb4-45"></a>            <span class="cf">if</span> (g[i][<span class="dv">0</span>][<span class="dv">1</span>] == -<span class="dv">1</span> || myabs(h[i] - it-&gt;first) &lt; myabs(h[i] - h[g[i][<span class="dv">0</span>][<span class="dv">1</span>]]))</span>
<span id="cb4-46"><a aria-hidden="true" href="#cb4-46"></a>                g[i][<span class="dv">0</span>][<span class="dv">0</span>] = g[i][<span class="dv">0</span>][<span class="dv">1</span>], g[i][<span class="dv">0</span>][<span class="dv">1</span>] = it-&gt;second;</span>
<span id="cb4-47"><a aria-hidden="true" href="#cb4-47"></a>            <span class="cf">else</span> <span class="cf">if</span> (g[i][<span class="dv">0</span>][<span class="dv">0</span>] == -<span class="dv">1</span> || myabs(h[i] - it-&gt;first) &lt; myabs(h[i] - h[g[i][<span class="dv">0</span>][<span class="dv">0</span>]]))</span>
<span id="cb4-48"><a aria-hidden="true" href="#cb4-48"></a>                g[i][<span class="dv">0</span>][<span class="dv">0</span>] = it-&gt;second;</span>
<span id="cb4-49"><a aria-hidden="true" href="#cb4-49"></a>        }</span>
<span id="cb4-50"><a aria-hidden="true" href="#cb4-50"></a>        S.insert(make_pair(h[i], i));</span>
<span id="cb4-51"><a aria-hidden="true" href="#cb4-51"></a>    }</span>
<span id="cb4-52"><a aria-hidden="true" href="#cb4-52"></a>    FOR(i, <span class="dv">1</span>, n) {</span>
<span id="cb4-53"><a aria-hidden="true" href="#cb4-53"></a>        FOR(k, <span class="dv">0</span>, <span class="dv">1</span>) {</span>
<span id="cb4-54"><a aria-hidden="true" href="#cb4-54"></a>            <span class="cf">if</span> (~g[i][<span class="dv">0</span>][k]) {</span>
<span id="cb4-55"><a aria-hidden="true" href="#cb4-55"></a>                f[i][<span class="dv">0</span>][k][k ^ <span class="dv">1</span>] = <span class="dv">0</span>;</span>
<span id="cb4-56"><a aria-hidden="true" href="#cb4-56"></a>                f[i][<span class="dv">0</span>][k][k] = myabs(h[g[i][<span class="dv">0</span>][k]] - h[i]);</span>
<span id="cb4-57"><a aria-hidden="true" href="#cb4-57"></a>            }</span>
<span id="cb4-58"><a aria-hidden="true" href="#cb4-58"></a>        }</span>
<span id="cb4-59"><a aria-hidden="true" href="#cb4-59"></a>    }</span>
<span id="cb4-60"><a aria-hidden="true" href="#cb4-60"></a>    FOR(j, <span class="dv">1</span>, <span class="dv">19</span>) {</span>
<span id="cb4-61"><a aria-hidden="true" href="#cb4-61"></a>        FOR(i, <span class="dv">1</span>, n) {</span>
<span id="cb4-62"><a aria-hidden="true" href="#cb4-62"></a>            FOR(k, <span class="dv">0</span>, <span class="dv">1</span>) {</span>
<span id="cb4-63"><a aria-hidden="true" href="#cb4-63"></a>                <span class="cf">if</span> (j == <span class="dv">1</span>) {</span>
<span id="cb4-64"><a aria-hidden="true" href="#cb4-64"></a>                    <span class="cf">if</span> (~g[i][j - <span class="dv">1</span>][k] &amp;&amp; ~g[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k ^ <span class="dv">1</span>]) {</span>
<span id="cb4-65"><a aria-hidden="true" href="#cb4-65"></a>                        g[i][j][k] = g[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k ^ <span class="dv">1</span>];</span>
<span id="cb4-66"><a aria-hidden="true" href="#cb4-66"></a>                        f[i][j][k][<span class="dv">0</span>] = f[i][j - <span class="dv">1</span>][k][<span class="dv">0</span>] + f[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k ^ <span class="dv">1</span>][<span class="dv">0</span>];</span>
<span id="cb4-67"><a aria-hidden="true" href="#cb4-67"></a>                        f[i][j][k][<span class="dv">1</span>] = f[i][j - <span class="dv">1</span>][k][<span class="dv">1</span>] + f[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k ^ <span class="dv">1</span>][<span class="dv">1</span>];</span>
<span id="cb4-68"><a aria-hidden="true" href="#cb4-68"></a>                    }</span>
<span id="cb4-69"><a aria-hidden="true" href="#cb4-69"></a>                } <span class="cf">else</span> {</span>
<span id="cb4-70"><a aria-hidden="true" href="#cb4-70"></a>                    <span class="cf">if</span> (~g[i][j - <span class="dv">1</span>][k] &amp;&amp; ~g[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k]) {</span>
<span id="cb4-71"><a aria-hidden="true" href="#cb4-71"></a>                        g[i][j][k] = g[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k];</span>
<span id="cb4-72"><a aria-hidden="true" href="#cb4-72"></a>                        f[i][j][k][<span class="dv">0</span>] = f[i][j - <span class="dv">1</span>][k][<span class="dv">0</span>] + f[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k][<span class="dv">0</span>];</span>
<span id="cb4-73"><a aria-hidden="true" href="#cb4-73"></a>                        f[i][j][k][<span class="dv">1</span>] = f[i][j - <span class="dv">1</span>][k][<span class="dv">1</span>] + f[g[i][j - <span class="dv">1</span>][k]][j - <span class="dv">1</span>][k][<span class="dv">1</span>];</span>
<span id="cb4-74"><a aria-hidden="true" href="#cb4-74"></a>                    }</span>
<span id="cb4-75"><a aria-hidden="true" href="#cb4-75"></a>                }</span>
<span id="cb4-76"><a aria-hidden="true" href="#cb4-76"></a>            }</span>
<span id="cb4-77"><a aria-hidden="true" href="#cb4-77"></a>        }</span>
<span id="cb4-78"><a aria-hidden="true" href="#cb4-78"></a>    }</span>
<span id="cb4-79"><a aria-hidden="true" href="#cb4-79"></a>    <span class="dt">int</span> x0; read(x0);</span>
<span id="cb4-80"><a aria-hidden="true" href="#cb4-80"></a>    <span class="dt">int</span> ans = -<span class="dv">1</span>;</span>
<span id="cb4-81"><a aria-hidden="true" href="#cb4-81"></a>    <span class="dt">double</span> rate = <span class="fl">1e18</span>;</span>
<span id="cb4-82"><a aria-hidden="true" href="#cb4-82"></a>    FOR(s, <span class="dv">1</span>, n) {</span>
<span id="cb4-83"><a aria-hidden="true" href="#cb4-83"></a>        calc(s, x0);</span>
<span id="cb4-84"><a aria-hidden="true" href="#cb4-84"></a>        <span class="dt">double</span> now = (!lb ? <span class="fl">1e9</span> : (<span class="dt">double</span>)la / lb);</span>
<span id="cb4-85"><a aria-hidden="true" href="#cb4-85"></a>        <span class="cf">if</span> (now &lt; rate) rate = now, ans = s;</span>
<span id="cb4-86"><a aria-hidden="true" href="#cb4-86"></a>        <span class="cf">else</span> <span class="cf">if</span> (now == rate &amp;&amp; h[s] &gt; h[ans])</span>
<span id="cb4-87"><a aria-hidden="true" href="#cb4-87"></a>            rate = now, ans = s;</span>
<span id="cb4-88"><a aria-hidden="true" href="#cb4-88"></a>    }</span>
<span id="cb4-89"><a aria-hidden="true" href="#cb4-89"></a>    print(ans), putchar(<span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>);</span>
<span id="cb4-90"><a aria-hidden="true" href="#cb4-90"></a>    <span class="dt">int</span> m; read(m);</span>
<span id="cb4-91"><a aria-hidden="true" href="#cb4-91"></a>    FOR(i, <span class="dv">1</span>, m) {</span>
<span id="cb4-92"><a aria-hidden="true" href="#cb4-92"></a>        <span class="dt">int</span> s, x; read(s), read(x);</span>
<span id="cb4-93"><a aria-hidden="true" href="#cb4-93"></a>        calc(s, x);</span>
<span id="cb4-94"><a aria-hidden="true" href="#cb4-94"></a>        print(la), putchar(<span class="ch">' '</span>), print(lb), putchar(<span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>);</span>
<span id="cb4-95"><a aria-hidden="true" href="#cb4-95"></a>    }</span>
<span id="cb4-96"><a aria-hidden="true" href="#cb4-96"></a>    <span class="cf">return</span> output(), <span class="dv">0</span>;</span>
<span id="cb4-97"><a aria-hidden="true" href="#cb4-97"></a>}</span></code></pre></div>
<h3 id="d2t3-疫情控制">D2T3 疫情控制</h3>
<p>稍加分析问题即可得到我们是需要将所有的军队从原来的位置移到特定的位置上使得根节点到每个叶子的路径都被覆盖到。而最优方案明显是每支军队同时移动，总代价就是花费时间最长的军队花费的时间。</p>
<p>“最大的最小”类型，并且该问题满足单调性，不难想到可以二分答案进行处理，二分的上界显然为树的直径，现在问题的关键是如何判定给定一个时间，能否在给定的时间内完成驻守。</p>
<p><span class="math inline">\(m \le n\le 5\times 10^4\)</span>，<span class="math inline">\(m\)</span> 的范围不是很好 dp，所以就需要想一些神奇的贪心了。</p>
<p>一个军队在的深度越浅，能控制的叶子节点越多，所以首先贪心的在二分的时间允许的范围内把每个军队往上提。这样子答案是不会更劣的。当然肯定有军队能到达根节点，这个时候先把其提到根下面的一级节点。然后再将其贪心地分配到没有被覆盖的根的儿子处。</p>
<p>提根的过程可以用倍增优化，无解的话就是如果军队个数少于根节点的度数就肯定无解。比较难写，<a href="https://www.luogu.com.cn/record/59726452">代码</a>。</p>
<h2 id="noip2013">NOIP2013</h2>
<h3 id="d1t1-转圈游戏">D1T1 转圈游戏</h3>
<p>秒得答案为 <span class="math inline">\((m\times 10^k + x)\bmod n\)</span>。</p>
<h3 id="d1t2-火柴排队">D1T2 火柴排队</h3>
<p>排序不等式贪心的应用，离散化，新建序列，求逆序对即可。</p>
<h3 id="d2t1-积木大赛">D2T1 积木大赛</h3>
<p>考虑差分数组，每次操作相当于可以给正的差分值减一并对应给负的加一。所以把所有的正差分值加起来即可。</p>
<h3 id="d2t2-花匠">D2T2 花匠</h3>
<p>什么毒瘤贪心。。。暴力找拐点。</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a aria-hidden="true" href="#cb5-1"></a><span class="at">const</span> <span class="dt">int</span> maxn = <span class="fl">1e5</span> + <span class="dv">5</span>;</span>
<span id="cb5-2"><a aria-hidden="true" href="#cb5-2"></a><span class="dt">int</span> n, a[maxn];</span>
<span id="cb5-3"><a aria-hidden="true" href="#cb5-3"></a></span>
<span id="cb5-4"><a aria-hidden="true" href="#cb5-4"></a><span class="dt">int</span> main() {</span>
<span id="cb5-5"><a aria-hidden="true" href="#cb5-5"></a>    read(n);</span>
<span id="cb5-6"><a aria-hidden="true" href="#cb5-6"></a>    FOR(i, <span class="dv">1</span>, n) read(a[i]);</span>
<span id="cb5-7"><a aria-hidden="true" href="#cb5-7"></a>    <span class="dt">int</span> b = <span class="dv">1</span>, c = <span class="dv">1</span>;</span>
<span id="cb5-8"><a aria-hidden="true" href="#cb5-8"></a>    FOR(i, <span class="dv">2</span>, n) {</span>
<span id="cb5-9"><a aria-hidden="true" href="#cb5-9"></a>        <span class="cf">if</span> (b &amp; <span class="dv">1</span>) {</span>
<span id="cb5-10"><a aria-hidden="true" href="#cb5-10"></a>            <span class="cf">if</span> (a[i] &gt; a[i - <span class="dv">1</span>]) ++b;</span>
<span id="cb5-11"><a aria-hidden="true" href="#cb5-11"></a>        } <span class="cf">else</span> <span class="cf">if</span> (a[i] &lt; a[i - <span class="dv">1</span>]) ++b;</span>
<span id="cb5-12"><a aria-hidden="true" href="#cb5-12"></a>        <span class="cf">if</span> (c &amp; <span class="dv">1</span>) {</span>
<span id="cb5-13"><a aria-hidden="true" href="#cb5-13"></a>            <span class="cf">if</span> (a[i] &lt; a[i - <span class="dv">1</span>]) ++c;</span>
<span id="cb5-14"><a aria-hidden="true" href="#cb5-14"></a>        } <span class="cf">else</span> <span class="cf">if</span> (a[i] &gt; a[i - <span class="dv">1</span>]) ++c;</span>
<span id="cb5-15"><a aria-hidden="true" href="#cb5-15"></a>    }</span>
<span id="cb5-16"><a aria-hidden="true" href="#cb5-16"></a>    print(max(b, c), <span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>);</span>
<span id="cb5-17"><a aria-hidden="true" href="#cb5-17"></a>    <span class="cf">return</span> output(), <span class="dv">0</span>;</span>
<span id="cb5-18"><a aria-hidden="true" href="#cb5-18"></a>}</span></code></pre></div>
<h3 id="d2t3-华容道">D2T3 华容道</h3>
<h2 id="noip2015">NOIP2015</h2>
<h3 id="d2t3-运输计划">D2T3 运输计划</h3>
<p>题意：给定树上若干条链，可以点一条边为 <span class="math inline">\(0\)</span>，问最长链长度的最小值。</p>
<p>考虑二分答案。二分一个 <span class="math inline">\(mid\)</span>，然后只考虑长 <span class="math inline">\(&gt; mid\)</span> 的链，找到一条最长的被这些链覆盖的边，判断最长链减去这条边之后能否满足 <span class="math inline">\(mid\)</span>。整个过程可以树上差分，十分简单。</p>
<h2 id="noip2016">NOIP2016</h2>
<h3 id="d1t2-天天爱跑步">D1T2 天天爱跑步</h3>
<p>题意：一棵树，</p>
<h2 id="noip2017">NOIP2017</h2>
<h3 id="d1t3-逛公园">D1T3 逛公园</h3>
<p>题意：给定一张有向图，设 <span class="math inline">\(1\to N\)</span> 的最短路为 <span class="math inline">\(d\)</span>，求出长度不超过 <span class="math inline">\(d + K\)</span> 的 <span class="math inline">\(1\to N\)</span> 路径的数量，或报告无解。</p>
<p><span class="math inline">\(N = 10^5\)</span>，<span class="math inline">\(M = 2\times 10^5\)</span>，<span class="math inline">\(K\le 50\)</span>，可能有 <span class="math inline">\(0\)</span> 权边。</p>
<p>注意到 <span class="math inline">\(K\)</span> 很小，尝试创造条件进行 <span class="math inline">\(O(NK)\)</span> 的 dp。首先考虑正反两边最短路跑出 <span class="math inline">\(d_1(u)\)</span> 和 <span class="math inline">\(d_N(u)\)</span> 分别表示 <span class="math inline">\(1\to u\)</span> 的最短路和 <span class="math inline">\(u\to N\)</span> 的最短路。然后考虑 dp 状态为 <span class="math inline">\(f_{u, j}\)</span> 表示 <span class="math inline">\(1\to u\)</span>，路径长 <span class="math inline">\(= d_1(u) + j\)</span> 的计数。我们可以写出转移： <span class="math display">\[
f_{v, j + w(u,v) + d_1(u) - d_1(v)} := f_{v, j + w(u,v) + d_1(u) - d_1(v)} + f_{u, j}
\]</span> 根据三角形不等式：<span class="math inline">\(d_1(v)\le d_1(u) + w(u,v)\)</span> 可以得到 <span class="math inline">\(d_1(u) - d_1(v) + w(u,v)\ge 0\)</span>。所以按照 <span class="math inline">\(d_1\)</span> 排个序然后 dp 就可以解出所有答案有穷的情况。</p>
<p>对于答案无穷的情况，则为可行路径上能出现 <span class="math inline">\(0\)</span> 环。将 <span class="math inline">\(0\)</span> 权边单独拎出来建图然后拓扑排序即得到 <span class="math inline">\(0\)</span> 环，若 <span class="math inline">\(0\)</span> 环上的点 <span class="math inline">\(u\)</span> 满足 <span class="math inline">\(d_1(u) + d_N(u)\le d_1(N) + K\)</span> 则说明其在可行路上。判断即可。</p>
<p>过不了 UOJ extra test 14。懒得研究正解了。</p>
<h3 id="d2t3-列队">D2T3 列队</h3>
<p>题意：<span class="math inline">\(n\times m\)</span> 列队，学生依次编号。<span class="math inline">\(q\)</span> 次操作，每次操作选择 <span class="math inline">\((x, y)\)</span> 的学生出队，然后向左看齐+向前看齐，学生在 <span class="math inline">\((n,m)\)</span> 归队。输出每次出队学生的编号。</p>
<p>考虑 <span class="math inline">\(n = 1\)</span> 的情况，可以用一个平衡树维护。</p>
<p><span class="math inline">\(n\ne 1\)</span> 的情况，可以用 <span class="math inline">\(n\)</span> 个平衡树维护前 <span class="math inline">\(m - 1\)</span> 列，用一个平衡树单独维护第 <span class="math inline">\(m\)</span> 列。发现我们若是动态开点（一个节点维护一个连续段）的话复杂度可以接受。</p>
<p>难写死了，qnmd。可以考虑直接利用 fhq-treap 的 split 特性，size 维护区间长度。</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a aria-hidden="true" href="#cb6-1"></a><span class="dt">void</span> split(<span class="dt">int</span> u, ll k) { <span class="co">// 将 u 节点的大小更改为 k</span></span>
<span id="cb6-2"><a aria-hidden="true" href="#cb6-2"></a>    <span class="cf">if</span> (k &gt;= t[u].r - t[u].l + <span class="dv">1</span>) <span class="cf">return</span>;</span>
<span id="cb6-3"><a aria-hidden="true" href="#cb6-3"></a>    ll want = t[u].l + k - <span class="dv">1</span>;</span>
<span id="cb6-4"><a aria-hidden="true" href="#cb6-4"></a>    <span class="dt">int</span> v = newnode(want + <span class="dv">1</span>, t[u].r);</span>
<span id="cb6-5"><a aria-hidden="true" href="#cb6-5"></a>    t[u].r = want;</span>
<span id="cb6-6"><a aria-hidden="true" href="#cb6-6"></a>    rs(u) = merge(v, rs(u));</span>
<span id="cb6-7"><a aria-hidden="true" href="#cb6-7"></a>    <span class="cf">return</span> pushup(u);</span>
<span id="cb6-8"><a aria-hidden="true" href="#cb6-8"></a>}</span>
<span id="cb6-9"><a aria-hidden="true" href="#cb6-9"></a></span>
<span id="cb6-10"><a aria-hidden="true" href="#cb6-10"></a><span class="dt">void</span> split(<span class="dt">int</span> u, ll sz, <span class="dt">int</span> &amp;x, <span class="dt">int</span> &amp;y) {</span>
<span id="cb6-11"><a aria-hidden="true" href="#cb6-11"></a>    <span class="cf">if</span> (!u) <span class="cf">return</span> x = <span class="dv">0</span>, y = <span class="dv">0</span>, <span class="dt">void</span>();</span>
<span id="cb6-12"><a aria-hidden="true" href="#cb6-12"></a>    <span class="cf">if</span> (t[ls(u)].size &gt;= sz) y = u, split(ls(u), sz, x, ls(u));</span>
<span id="cb6-13"><a aria-hidden="true" href="#cb6-13"></a>    <span class="cf">else</span> {</span>
<span id="cb6-14"><a aria-hidden="true" href="#cb6-14"></a>        split(u, sz - t[ls(u)].size);</span>
<span id="cb6-15"><a aria-hidden="true" href="#cb6-15"></a>        x = u, split(rs(u), sz - t[ls(u)].size - (t[u].r - t[u].l + <span class="dv">1</span>), rs(u), y);</span>
<span id="cb6-16"><a aria-hidden="true" href="#cb6-16"></a>    }</span>
<span id="cb6-17"><a aria-hidden="true" href="#cb6-17"></a>    <span class="cf">return</span> pushup(u);</span>
<span id="cb6-18"><a aria-hidden="true" href="#cb6-18"></a>}</span></code></pre></div>
</section>
<footer class="article-footer">
<section class="article-tags">
<a href="/tags/OI/">OI</a>
<a href="/tags/NOIP/">NOIP</a>
<a href="/tags/editorial/">题解</a>
<a href="/tags/implementation/">模拟</a>
<a href="/tags/prefix-sum/">前缀和</a>
<a href="/tags/searching/">搜索</a>
<a href="/tags/binary-search/">二分答案</a>
<a href="/tags/greedy/">贪心</a>
<a href="/tags/bigint/">高精度</a>
<a href="/tags/dp/">动态规划</a>
</section>
<section class="article-copyright">
<svg class="icon icon-tabler icon-tabler-copyright" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="12" cy="12" r="9"></circle>
<path d="M14.5 9a3.5 4 0 1 0 0 6"></path>
</svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" rel="stylesheet"/><script crossorigin="anonymous" defer="" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js">
</script><script crossorigin="anonymous" defer="" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js">
</script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
</article>
<aside class="related-contents--wrapper">
<h2 class="section-title">相关文章</h2>
<div class="related-contents">
<div class="flex article-list--tile">
<article class="has-image">
<a href="/summary-atcoder/">
<div class="article-image">
<img data-hash="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg70.webp" data-key="" loading="lazy" src="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg70.webp"/>
</div>
<div class="article-details">
<h2 class="article-title">AtCoder 比赛日记</h2>
</div>
</a>
</article>
<article class="has-image">
<a href="/sol-lhsx2022/">
<div class="article-image">
<img data-hash="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg1.webp" data-key="" loading="lazy" src="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg1.webp"/>
</div>
<div class="article-details">
<h2 class="article-title">联合省选 2022 题解</h2>
</div>
</a>
</article>
<article class="has-image">
<a href="/sol-lhsx2021/">
<div class="article-image">
<img data-hash="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg22.webp" data-key="" loading="lazy" src="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg22.webp"/>
</div>
<div class="article-details">
<h2 class="article-title">联合省选 2021 题解</h2>
</div>
</a>
</article>
<article class="has-image">
<a href="/summary-codeforces/">
<div class="article-image">
<img data-hash="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg1.webp" data-key="" loading="lazy" src="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg1.webp"/>
</div>
<div class="article-details">
<h2 class="article-title">Codeforces 比赛日记</h2>
</div>
</a>
</article>
<article class="has-image">
<a href="/sol-cspj2020/">
<div class="article-image">
<img data-hash="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg10.webp" data-key="" loading="lazy" src="https://yangty-pic.oss-cn-beijing.aliyuncs.com/bg10.webp"/>
</div>
<div class="article-details">
<h2 class="article-title">CSP-J 2020 题解</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<footer class="site-footer">
<section class="copyright">
        © 
        
            2019 - 
        
        2024 清烛的博客
    </section>
<section class="powerby">
        Built with <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo</a> <br/>
        主题 <b><a data-version="3.11.0" href="https://github.com/CaiJimmy/hugo-theme-stack" rel="noopener" target="_blank">Stack</a></b> 由 <a href="https://jimmycai.com" rel="noopener" target="_blank">Jimmy</a> 设计
    </section>
</footer>
<div aria-hidden="true" class="pswp" role="dialog" tabindex="-1">
<div class="pswp__bg"></div>
<div class="pswp__scroll-wrap">
<div class="pswp__container">
<div class="pswp__item"></div>
<div class="pswp__item"></div>
<div class="pswp__item"></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class="pswp__top-bar">
<div class="pswp__counter"></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title="Share"></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class="pswp__preloader">
<div class="pswp__preloader__icn">
<div class="pswp__preloader__cut">
<div class="pswp__preloader__donut"></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class="pswp__share-tooltip"></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class="pswp__caption">
<div class="pswp__caption__center"></div>
</div>
</div>
</div>
</div><script crossorigin="anonymous" defer="" integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js">
</script><script crossorigin="anonymous" defer="" integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js">
</script><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css" integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" rel="stylesheet"/><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css" integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" rel="stylesheet"/>
</main>
</div>
<script crossorigin="anonymous" integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js">
</script><script defer="" src="/ts/main.js" type="text/javascript"></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
</body>
</html>
